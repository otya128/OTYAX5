diff -u OTW.TXT OTW14
--- OTW.TXT
+++ OTW14
@@ -614,7 +614,6 @@
  SPSET SP,WIN_AX[NUWID],WIN_AY[NUWID],WIN_WIDTH[NUWID]+1,WIN_HEIGHT[NUWID]+1,1
  SPOFS SP,WIN_AX[NUWID],WIN_AY[NUWID],0
  SPSHOW SP
-
  SPVAR SP,0,WND
  OTW_SPSORT
 END
@@ -1479,6 +1478,7 @@
 VAR OTW_USEBTN
 COMMON DEF I_OTW
  IF!OTW_INIT THEN
+  VAR FM=FREEMEM
   PrintConsole "====================="+LF$()
   PrintConsole "OTYA 3D WINDOW SYSTEM"+LF$()
   PrintConsole "====================="+LF$()
@@ -1505,13 +1505,16 @@
   GCLS RGB(0,192,0)
   GCLS 
   VAR I,J
-  FOR J=0TO 2
-   FOR I=0TO 240/4
-   GLINE 0,I+60*J,400,I+60*J,&HFF000000 OR(I*8<<J*8)XOR &HFFFFFF'RGB(0,I*4,0)
-'    GLINE 0,I+60*J,400,I+60*J,RGB(0,I*4,I*4) 
-   NEXT
+' FOR J=0TO 2
+'  FOR I=0TO 240/4
+'  GLINE 0,I+60*J,400,I+60*J,&HFF000000 OR(I*8<<J*8)XOR &HFFFFFF'RGB(0,I*4,0)
+'    GLINE 0,I+60*J,400,I+60*J,RGB(0,I*4,I*4) '
+ ' NEXT
+' NEXT
+  GCLS 
+  FOR I=-400TO 400 STEP 2
+   GLINE I,0,I+400,400,RGB(0,255,0)'RGB(255,255,255)
   NEXT
-  
   GPAGE OTW_SP,OTW_DP
   GPRIO 1023
   GCLS RGB(0,192,128)
@@ -1602,7 +1605,9 @@
   SPVAR OTW_MOVWINSP,0,1
   CLS
   LOCATE 0,29
- NewProcess"LAUNCHER","" OUT E,E,E
+  NewProcess"LAUNCHER","" OUT E,E,E
+  DEC FM,FREEMEM
+  PrintConsole FORMAT$("UsingMemory8192KB/%DKB",FM/1024)+LF$()
  ENDIF
 RETURN
 END
@@ -1984,78 +1989,6 @@
 'DEF OTW_LOADMOUSE
 ' 
 'END
-DEF OTW_LOADFONT
- 'LOAD FONT-1
- VAR C$
- VAR X,Y,I,J
- RESTORE @FONT
- VAR C,_$,K
- DIM PAL[16]
- OTW_CONSOLEPAL=PAL
- FOR I=0TO 15
-  READ PAL[I]
- NEXT
- IF!CHKFILE("DAT:FONT")THEN
-  SAVE "GRPF:FONT"
-  IF RESULT==-1THEN SAVE "GRPF:FONT"
-  '2かいもやめたならしかたない
- ENDIF
- LOAD"GRP1:FONT",0
- VAR L
- OTW_FNT=NewArray2(1024,64)
- OTW_FNTTMP=NewArray(64)
- OTW_FNTPAL=NewArray(2)
- OTW_FNTTBL=NewArray(65536)
- GPAGE 0,1
- FOR I=0TO 1023
-  X=I*8
-  Y=X/512
-  Y=Y*8
-  X=X MOD 512
-  OTW_FNTTBL[I]=I
-  VAR X2=X+7,Y2=Y+7,M=0
-  FOR K=Y TO Y2
-   FOR J=X TO X2
-    IF(GSPOIT(J,K)AND&HFF000000)THEN
-     OTW_FNT[I,M]=1
-    ENDIF
-    INC M
-   NEXT
-  NEXT
- NEXT
- OTW_FNTTBL[10]=13
- GPAGE 0,0
-@FONT
-RETURN
-COLOR
-'      AARRGGBB
-DATA &H00000000
-DATA &HFF000000
-DATA &HFF7F0000
-DATA &HFFFF0000
-DATA &HFF007F00
-DATA &HFF00FF00
-DATA &HFF7F7F00
-DATA &HFFFFFF00
-DATA &HFF00007F
-DATA &HFF0000FF
-DATA &HFF7F007F
-DATA &HFFFF00FF
-DATA &HFF007F7F
-DATA &HFF00FFFF
-DATA &HFF7F7F7F
-DATA &HFFFFFFFF
-DATA "0"
-DATA &B00111000'"00FFF000"
-DATA &B01000100
-DATA &B01001100
-DATA &B01010100
-DATA &B01100100
-DATA &B01000100
-DATA &B00111000
-DATA &B00000000
-DATA "END"
-END
 COMMON DEF I_CREATEOTW
  ?"OTW Develop Tool"
  VAR K$
@@ -2136,7 +2069,7 @@
   RETURN
  ENDIF
  VAR PTR=malloc(64*64)
- IF!PTR THEN BEEP:ExitProcess 1
+ IF!PTR THEN BEEP:ExitProcess 1RETURN
  VAR WND,E
  IF!PAINTCTL THEN
   ExtendControl "PAINT",GetWindowControl() OUT PAINTCTL,E
@@ -2445,6 +2378,7 @@
 VAR RTXTEDNOT
 VAR RTXTEDMOD
 VAR RTXTEDDIV
+VAR RTXTEDCALL
 COMMON DEF TXTED_PRGPRINT WND,X,Y,P$
  VAR L=LEN(P$)-1,I,A
  VAR _0=ASC("0"),_9=ASC("9"),_Q=34
@@ -2528,6 +2462,7 @@
       GPUTCHRWindow WND,X,Y,A,RGB(247,69,149)
       INC X,8
      NEXT
+     DEC I
      BREAK
     ENDIF
     IF A==_H THEN
@@ -2542,7 +2477,6 @@
      NEXT
      BREAK
     ENDIF
-    DEC I
     DEC X,8
     BREAK
    NEXT
@@ -2595,4 +2529,127 @@
 COMMON DEF L_PRGED
  IF UpdateWindow(GetProcessVar())THEN ExitProcess 1
 END
+'===OTYA DOCUMENT EDITOR===
+VAR OTYDOCCTL
+COMMON DEF I_OTYDOC
+ IF!CHKCALL("IsWinRunning")||!IsWinRunning()THEN
+  PrintConsole "Require window system"+LF$()
+  ExitProcess 1
+  RETURN
+ ENDIF
+ VAR WND,E
+ IF!OTYDOCCTL THEN
+  ExtendControl "OTYDOC",GetWindowControl() OUT OTYDOCCTL,E
+ ENDIF
+ NewTopLevelWindow OTYDOCCTL,"OTYDOC",128,128 OUT WND,E
+ SetProcessVar WND
+END
+COMMON DEF L_OTYDOC
+ IF UpdateWindow(GetProcessVar())THEN ExitProcess 1
+END
+'===OTYA DOCUMENT EDITOR===
 
+DEF OTW_LOADFONT
+ 'LOAD FONT-1
+ VAR C$
+ VAR X,Y,I,J
+ RESTORE @FONT
+ VAR C,_$,K
+ DIM PAL[16]
+ OTW_CONSOLEPAL=PAL
+ FOR I=0TO 15
+  READ PAL[I]
+ NEXT
+ IF!CHKFILE("DAT:FONT")THEN
+  SAVE "GRPF:FONT"
+  IF RESULT==-1THEN SAVE "GRPF:FONT"
+  '2かいもやめたならしかたない
+ ENDIF
+ LOAD"GRP1:FONT",0
+ VAR L
+ OTW_FNT=NewArray2(1024,64)
+ OTW_FNTTMP=NewArray(64)
+ OTW_FNTPAL=NewArray(2)
+ OTW_FNTTBL=NewArray(65536)
+ GPAGE 0,1
+ FOR I=0TO 1023
+  X=I*8
+  Y=X/512
+  Y=Y*8
+  X=X MOD 512
+  VAR X2=X+7,Y2=Y+7,M=0
+  FOR K=Y TO Y2
+   FOR J=X TO X2
+    IF(GSPOIT(J,K)AND&HFF000000)THEN
+     OTW_FNT[I,M]=1
+    ENDIF
+    INC M
+   NEXT
+  NEXT
+ NEXT
+ OTW_FNTTBL[10]=13
+ GPAGE 0,0
+ OTW_LOADFNTTBL
+@FONT
+RETURN
+COLOR
+'      AARRGGBB
+DATA &H00000000
+DATA &HFF000000
+DATA &HFF7F0000
+DATA &HFFFF0000
+DATA &HFF007F00
+DATA &HFF00FF00
+DATA &HFF7F7F00
+DATA &HFFFFFF00
+DATA &HFF00007F
+DATA &HFF0000FF
+DATA &HFF7F007F
+DATA &HFFFF00FF
+DATA &HFF007F7F
+DATA &HFF00FFFF
+DATA &HFF7F7F7F
+DATA &HFFFFFFFF
+DATA "0"
+DATA &B00111000'"00FFF000"
+DATA &B01000100
+DATA &B01001100
+DATA &B01010100
+DATA &B01100100
+DATA &B01000100
+DATA &B00111000
+DATA &B00000000
+DATA "END"
+END
+DEF OTW_LOADFNTTBL
+ RESTORE@RANGE
+ VAR I
+ WHILE 1
+  VAR R1,R2,C1,C2
+  READ R1
+  IF R1==-1THEN BREAK
+  READ C1,R2,C2
+  FOR I=R1 TO R2
+   OTW_FNTTBL[I]=C1
+   INC C1
+  NEXT
+ WEND
+ RESTORE @GRPFTABLE
+ WHILE 1
+  READ R1
+  IF R1==-1THEN BREAK
+  READ C1
+  OTW_FNTTBL[R1]=C1
+ WEND
+@RANGE
+DATA &H20,&H20,&H7F,&H7F
+DATA 57857,1,57883,27
+DATA 65280,32,65371,123
+DATA 57984,128,58015,159
+DATA -1,"A"
+@GRPFTABLE
+
+'=REMOVED(DIFF)=
+
+DATA -1
+END
